<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Chemical Inventory</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    .container {
      background: #fff;
      padding: 15px;
      margin: 15px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      width: 300px;
      display: inline-block;
      vertical-align: top;
    }
    .container h2 {
      font-size: 18px;
      color: #34495e;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input {
      width: 80%;
      padding: 5px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      margin-top: 10px;
      margin-right: 5px;
      padding: 5px 10px;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #2980b9;
    }
    #inventory {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    p {
      font-size: 14px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>Chemical Inventory Management</h1>
  <div id="inventory"></div>

  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script>
    // ✅ Replace this with your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyAq1n2IIwMauj8nj7dEyPSg7wsKVID3AT8",
      authDomain: "chemical-inventory-e0681.firebaseapp.com",
      databaseURL: "https://chemical-inventory-e0681-default-rtdb.firebaseio.com",
      projectId: "chemical-inventory-e0681",
      storageBucket: "chemical-inventory-e0681.appspot.com",
      messagingSenderId: "1040891808880",
      appId: "1:1040891808880:web:043585c0cff38d79a338b5",
      measurementId: "G-HTH4QHPK6F"
    };

    // ✅ Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const chemicals = [
      "Asbestos Sheet", "B.O.D. Bottle", "Burette 10mL", "Burette", "Burette Stand with Clip", "BOD Bottle",
      "Beaker 1000mL", "Beaker 500mL", "Beaker 250mL", "Beaker 100mL", "Beaker 25mL", "Beaker (some)",
      "Buchner Funnel (Small)", "Buchner Funnel (Big)", "Capillary Tube", "Conical Flask 1000mL",
      "Conical Flask 500mL", "Conical Flask 250mL", "Conical Flask 100mL", "Conical Flask with Gland",
      "Conical Flask with a Glee", "Conical Flask Wide Side", "Conical Flask (Tarsm)", "Crucible with Lid",
      "Congo Red Paper", "Cotton Bleached", "Dessicator", "Drop Bottle (Glass)", "Conical Flask (Nominal)",
      "Column Chromatography Flask", "Filter Flask (500mL)", "Fire Bucket with Sand", "Evaporating Dish",
      "First Aid Box", "Funnel", "Filter Paper", "Funnel 100mL", "Filter Flask 100mL", "Glass Funnel (Small Sink)",
      "Glass Column", "Gas Pipe", "Glass Rod", "Crucible (Couch Type)", "ICE Spot", "ID Jar", "IL Flask",
      "Landberger’s Apparatus", "Iodine Flask (Glass 2500mL)", "Measuring Cylinder", "Notice Board",
      "GIRAS 500mL", "Ostwald Viscometer", "Plastic Funnel (Big)", "Plastic Lid",
      "Measuring Cylinder (Plastic 100mL)", "Measuring Cylinder 10mL", "Measuring Cylinder 25mL",
      "Measuring Cylinder 50mL", "Measuring Cylinder 100mL", "Pipette 25mL", "Pipette 100mL",
      "Plastic Sample Bottle", "Pestle and Mortar", "Plastic Funnel (Small)", "Plastic Beaker 500mL",
      "Plastic Beaker 1L", "Pipe Clay Triangle", "Petri Dish", "Plastic Beaker 2500mL", "Plastic Beaker 250mL",
      "Plastic Water Bath", "Plastic Tray", "Rubber Cork", "Reagent Bottle", "Spatula (Metal)", "Test Tube Holder",
      "Reflux Condenser", "Spatula (Plastic)", "Test Tube Stand", "Rubber Tubing for Burette", "Steel Water Bath",
      "Thiele Tube", "Sodium Fusion Tube", "Scissors", "TLC Jar", "Round Bottom Flask (2 Neck)",
      "Specific Gravity Bottle", "Test Tube Box", "Round Bottom Flask 100mL", "Thermometer (110°C)",
      "Stalagmometer", "Thermometer (300°C)", "Separating Funnel", "Separating Funnel (M/S)", "Test Tube Brush 6",
      "Turmeric Paper", "Volumetric Flask 100mL", "Volumetric Flask 250mL", "Volumetric Flask 500mL",
      "Volumetric Flask 1000mL", "Volumetric Flask (Plastic 1000mL)", "Volumetric Flask (Plastic 500mL)",
      "Volumetric Flask (Glass 100mL)", "Viscometer 10mL", "Viscometer 25mL", "Wire Gauze", "White Can (5L)",
      "Wash Bottle (500mL Plastic)", "Whatman Filter Paper", "Watch Glass"
    ];

    const inventory = document.getElementById("inventory");

    chemicals.forEach(name => {
      const safeKey = name.replace(/[.#$/\[\]]/g, "_");

      const div = document.createElement("div");
      div.className = "container";
      div.innerHTML = `
        <h2>${name}</h2>
        <label>Available: <input type="number" id="avail-${safeKey}" placeholder="Set once"></label>
        <label>Use: <input type="number" id="use-${safeKey}" placeholder="Qty to use"></label>
        <button onclick="setAvailable('${name}')">Set</button>
        <button onclick="useQuantity('${name}')">Use</button>
        <p id="status-${safeKey}">Loading...</p>
      `;
      inventory.appendChild(div);

      db.ref("chemicals/" + safeKey).on("value", snapshot => {
        const data = snapshot.val();
        if (data && data.available !== undefined) {
          document.getElementById(`avail-${safeKey}`).value = data.available;
          document.getElementById(`avail-${safeKey}`).disabled = true;
          document.getElementById(`status-${safeKey}`).innerText = `Available: ${data.available}`;
        } else {
          document.getElementById(`status-${safeKey}`).innerText = `Available: Not Set`;
        }
      });
    });

    function setAvailable(name) {
      const safeKey = name.replace(/[.#$/\[\]]/g, "_");
      const qty = parseInt(document.getElementById(`avail-${safeKey}`).value);
      if (!isNaN(qty)) {
        db.ref("chemicals/" + safeKey).set({ available: qty });
        document.getElementById(`avail-${safeKey}`).disabled = true;
      }
    }

    function useQuantity(name) {
      const safeKey = name.replace(/[.#$/\[\]]/g, "_");
      const useQty = parseInt(document.getElementById(`use-${safeKey}`).value);
      db.ref("chemicals/" + safeKey).once("value").then(snapshot => {
        const data = snapshot.val();
        if (data && data.available !== undefined && !isNaN(useQty)) {
          const newQty = Math.max(data.available - useQty, 0);
          db.ref("chemicals/" + safeKey).set({ available: newQty });
          document.getElementById(`use-${safeKey}`).value = "";
        }
      });
    }
  </script>
</body>
</html>
